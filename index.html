<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <title>SnoreTrack — ติดตามการกรนอย่างชาญฉลาด</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="แอปติดตามการกรนที่ใช้งานง่าย ออกแบบมาให้ทุกคนเข้าถึงได้" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
</head>
<body>
  <!-- SVG Icon Sprites -->
  <svg xmlns="http://www.w3.org/2000/svg" style="position:absolute;width:0;height:0;overflow:hidden" aria-hidden="true">
    <!-- Today/Dashboard icon -->
    <symbol id="icon-today" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke-width="2"/>
      <line x1="16" y1="2" x2="16" y2="6" stroke-width="2"/>
      <line x1="8" y1="2" x2="8" y2="6" stroke-width="2"/>
      <line x1="3" y1="10" x2="21" y2="10" stroke-width="2"/>
      <circle cx="8" cy="14" r="1" fill="currentColor"/>
      <circle cx="12" cy="14" r="1" fill="currentColor"/>
      <circle cx="16" cy="14" r="1" fill="currentColor"/>
    </symbol>
    
    <!-- Logs/History icon -->
    <symbol id="icon-logs" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke-width="2"/>
      <polyline points="14,2 14,8 20,8" stroke-width="2"/>
      <line x1="9" y1="12" x2="15" y2="12" stroke-width="2"/>
      <line x1="9" y1="16" x2="15" y2="16" stroke-width="2"/>
    </symbol>
    
    <!-- Charts/Analytics icon -->
    <symbol id="icon-charts" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <line x1="18" y1="20" x2="18" y2="10" stroke-width="2"/>
      <line x1="12" y1="20" x2="12" y2="4" stroke-width="2"/>
      <line x1="6" y1="20" x2="6" y2="14" stroke-width="2"/>
    </symbol>
    
    <!-- Settings/Gear icon -->
    <symbol id="icon-settings" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.39a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" stroke-width="1.5"/>
      <circle cx="12" cy="12" r="3" stroke-width="1.5"/>
    </symbol>
    
    <!-- Target/Start icon -->
    <symbol id="icon-target" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <circle cx="12" cy="12" r="10" stroke-width="2"/>
      <circle cx="12" cy="12" r="6" stroke-width="2"/>
      <circle cx="12" cy="12" r="2" stroke-width="2"/>
    </symbol>
    
    <!-- Clock/Time icon -->
    <symbol id="icon-clock" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <circle cx="12" cy="12" r="10" stroke-width="2"/>
      <polyline points="12,6 12,12 16,14" stroke-width="2"/>
    </symbol>
    
    <!-- Sound/Volume icon -->
    <symbol id="icon-sound" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <polygon points="11,5 6,9 2,9 2,15 6,15 11,19 11,5" stroke-width="2"/>
      <path d="M15.54 8.46a5 5 0 0 1 0 7.07" stroke-width="2"/>
      <path d="M19.07 4.93a10 10 0 0 1 0 14.14" stroke-width="2"/>
    </symbol>
    
    <!-- Bar Chart icon -->
    <symbol id="icon-bar-chart" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <line x1="12" y1="20" x2="12" y2="10" stroke-width="2"/>
      <line x1="18" y1="20" x2="18" y2="4" stroke-width="2"/>
      <line x1="6" y1="20" x2="6" y2="16" stroke-width="2"/>
    </symbol>
    
    <!-- Sleep/Moon icon -->
    <symbol id="icon-sleep" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke-width="2"/>
    </symbol>
    
    <!-- Upload/Export icon -->
    <symbol id="icon-upload" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke-width="2"/>
      <polyline points="7,10 12,5 17,10" stroke-width="2"/>
      <line x1="12" y1="5" x2="12" y2="15" stroke-width="2"/>
    </symbol>
    
    <!-- Download/Import icon -->
    <symbol id="icon-download" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke-width="2"/>
      <polyline points="7,10 12,15 17,10" stroke-width="2"/>
      <line x1="12" y1="15" x2="12" y2="3" stroke-width="2"/>
    </symbol>
    
    <!-- Save icon -->
    <symbol id="icon-save" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" stroke-width="2"/>
      <polyline points="17,21 17,13 7,13 7,21" stroke-width="2"/>
      <polyline points="7,3 7,8 15,8" stroke-width="2"/>
    </symbol>
    
    <!-- Refresh/Reset icon -->
    <symbol id="icon-refresh" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <polyline points="23,4 23,10 17,10" stroke-width="2"/>
      <polyline points="1,20 1,14 7,14" stroke-width="2"/>
      <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15" stroke-width="2"/>
    </symbol>
    
    <!-- Menu (hamburger) icon -->
    <symbol id="icon-menu" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <line x1="3" y1="6" x2="21" y2="6" stroke-width="2" stroke-linecap="round"/>
      <line x1="3" y1="12" x2="21" y2="12" stroke-width="2" stroke-linecap="round"/>
      <line x1="3" y1="18" x2="21" y2="18" stroke-width="2" stroke-linecap="round"/>
    </symbol>
    
    <!-- Close icon -->
    <symbol id="icon-close" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <line x1="6" y1="6" x2="18" y2="18" stroke-width="2" stroke-linecap="round"/>
      <line x1="6" y1="18" x2="18" y2="6" stroke-width="2" stroke-linecap="round"/>
    </symbol>
  </svg>

  <header class="header">
    <div class="container">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
            <circle cx="16" cy="16" r="16" fill="#2563eb"/>
            <path d="M20 12c0-2.2-1.8-4-4-4s-4 1.8-4 4v8c0 2.2 1.8 4 4 4s4-1.8 4-4v-8z" fill="white"/>
            <circle cx="14" cy="14" r="1.5" fill="#2563eb"/>
            <circle cx="18" cy="14" r="1.5" fill="#2563eb"/>
            <path d="M13 18c1 1 2 1 3 1s2 0 3-1" stroke="#2563eb" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </div>
        <h1 class="title">SnoreTrack</h1>
      </div>

      <nav class="nav" role="navigation" aria-label="หลัก">
        <button class="nav-btn active" data-tab="today" type="button">
          <span class="nav-icon"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-today"/></svg></span>
          <span>วันนี้</span>
        </button>
        <button class="nav-btn" data-tab="logs" type="button">
          <span class="nav-icon"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-logs"/></svg></span>
          <span>บันทึก</span>
        </button>
        <button class="nav-btn" data-tab="charts" type="button">
          <span class="nav-icon"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-charts"/></svg></span>
          <span>กราฟ</span>
        </button>
        <button class="nav-btn" data-tab="settings" type="button">
          <span class="nav-icon"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-settings"/></svg></span>
          <span>ตั้งค่า</span>
        </button>
        <div class="nav-indicator" aria-hidden="true"></div>
      </nav>

      <!-- Mobile hamburger -->
      <div class="nav-mobile">
        <button id="btnHamburger" class="hamburger" type="button" aria-label="เมนู" aria-controls="mobileMenu" aria-expanded="false">
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-menu"/></svg>
        </button>
        <div id="mobileMenu" class="mobile-menu" hidden>
          <button class="mobile-item" data-tab="today">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-today"/></svg>
            วันนี้
          </button>
          <button class="mobile-item" data-tab="logs">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-logs"/></svg>
            บันทึก
          </button>
          <button class="mobile-item" data-tab="charts">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-charts"/></svg>
            กราฟ
          </button>
          <button class="mobile-item" data-tab="settings">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-settings"/></svg>
            ตั้งค่า
          </button>
        </div>
      </div>
    </div>
  </header>

  <main class="main">
    <div class="container">
      <!-- ====== TODAY ====== -->
      <section id="view-today" class="view active">
        <div class="section-header">
          <h2>สรุปการนอนวันนี้</h2>
          <button id="btnSimulateTonight" class="btn btn-primary">
            <span class="btn-icon"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-target"/></svg></span>
            เริ่มบันทึกคืนนี้
          </button>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-clock"/></svg></div>
            <div class="stat-content">
              <div class="stat-label">เวลานอนรวม</div>
              <div id="kpi-total" class="stat-value">—</div>
              <div id="kpi-total-avg" class="stat-compare">เทียบ 7 วัน: —</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-sound"/></svg></div>
            <div class="stat-content">
              <div class="stat-label">นาทีที่กรน</div>
              <div id="kpi-snore-min" class="stat-value">—</div>
              <div id="kpi-snore-avg" class="stat-compare">เทียบ 7 วัน: —</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-bar-chart"/></svg></div>
            <div class="stat-content">
              <div class="stat-label">ครั้งที่กรน</div>
              <div id="kpi-snore-count" class="stat-value">—</div>
              <div id="kpi-snore-count-avg" class="stat-compare">—</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-sleep"/></svg></div>
            <div class="stat-content">
              <div class="stat-label">คุณภาพการนอน</div>
              <div id="kpi-apnea-pct" class="stat-value">—</div>
              <div id="kpi-score" class="stat-compare">—</div>
            </div>
          </div>
        </div>
      </section>

      <!-- ====== LOGS ====== -->
      <section id="view-logs" class="view">
        <div class="section-header">
          <h2>ประวัติการนอน</h2>
        </div>

        <div class="filter-tabs">
          <button class="filter-tab" data-range="today">วันนี้</button>
          <button class="filter-tab" data-range="7">7 วัน</button>
          <button class="filter-tab" data-range="30">30 วัน</button>
          <button class="filter-tab active" data-range="all">ทั้งหมด</button>
        </div>

        <div id="logsList" class="logs-list">
          <!-- เติมด้วย JS -->
        </div>
      </section>

      <!-- ====== CHARTS ====== -->
      <section id="view-charts" class="view">
        <div class="section-header">
          <h2>วิเคราะห์ข้อมูล</h2>
          <div class="header-actions">
            <select id="chartDateSelect" class="select" aria-label="เลือกวันที่">
              <option value="">เลือกวันที่...</option>
            </select>
            <button id="btnSaveCharts" class="btn btn-outline">
              <span class="btn-icon"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-save"/></svg></span>
              บันทึกกราฟ
            </button>
          </div>
        </div>

        <div class="charts-container">
          <div class="chart-section">
            <h3>การกรนตลอดคืน</h3>
            <div class="chart-wrapper">
              <canvas id="lineSnorePerHour" width="800" height="400"></canvas>
            </div>
          </div>
          
          <div class="chart-section">
            <h3>ความถี่การกรน</h3>
            <div class="chart-wrapper">
              <canvas id="barSnoreBins" width="800" height="400"></canvas>
            </div>
          </div>
          
          <div class="chart-section">
            <h3>ระยะการนอน</h3>
            <div class="chart-wrapper chart-donut">
              <canvas id="donutStages" width="400" height="400"></canvas>
            </div>
          </div>
        </div>
      </section>

      <!-- ====== SETTINGS ====== -->
      <section id="view-settings" class="view">
        <div class="section-header">
          <h2>การตั้งค่า</h2>
        </div>

        <div class="settings-container">
          <div class="setting-group">
            <div class="setting-item">
              <div class="setting-header">
                <label for="vibrationLevel" class="setting-label">แรงสั่น</label>
                <span id="vibrationValue" class="setting-value">—</span>
              </div>
              <input type="range" id="vibrationLevel" min="0" max="100" step="1" class="range-input" />
              <div class="range-labels">
                <span>เบา</span>
                <span>แรง</span>
              </div>
            </div>

            <div class="setting-item">
              <div class="setting-header">
                <label for="travelMode" class="setting-label">โหมดเดินทาง</label>
                <div class="toggle-switch">
                  <input type="checkbox" id="travelMode" class="toggle-input" />
                  <label for="travelMode" class="toggle-label"></label>
                </div>
              </div>
              <p class="setting-description">ลดแรงสั่นอัตโนมัติเมื่อเดินทาง</p>
            </div>

            <div class="setting-item">
              <div class="setting-header">
                <label for="snoreThreshold" class="setting-label">ความไวในการจับกรน</label>
              </div>
              <input type="number" id="snoreThreshold" min="10" max="100" step="1" class="number-input" />
              <p class="setting-description">ค่าสูงขึ้น = ไวต่อเสียงกรนมากขึ้น</p>
            </div>
          </div>

          <div class="setting-actions">
            <button id="btnSaveSettings" class="btn btn-primary">
              <span class="btn-icon"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-save"/></svg></span>
              บันทึกการตั้งค่า
            </button>
            <button id="btnResetSettings" class="btn btn-outline">
              <span class="btn-icon"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-refresh"/></svg></span>
              คืนค่าเริ่มต้น
            </button>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Toast Notification -->
  <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

  <!-- Scripts -->
  <script src="mock-device.js"></script>
  <script src="app.js"></script>
</body>
</html>
